var e=Object.defineProperty,o=(o,t,n)=>(((o,t,n)=>{t in o?e(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n})(o,"symbol"!=typeof t?t+"":t,n),n);import{r as t,j as n,B as a,a as s,C as i,b as r,I as l,d,T as c,c as u,R as h,e as p,f as g,g as m,h as f,i as b,k as v,l as x,m as y,n as w,M as C,F as k,o as N,S,p as T,q as I}from"./vendor.f7426dc4.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&o(e)})).observe(document,{childList:!0,subtree:!0})}function o(e){if(e.ep)return;e.ep=!0;const o=function(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?o.credentials="include":"anonymous"===e.crossorigin?o.credentials="omit":o.credentials="same-origin",o}(e);fetch(e.href,o)}}();var L="_App_11ngr_1";class j extends t.exports.Component{constructor(e){super(e),o(this,"handleClick",(async e=>{if(e.preventDefault(),"Download"===e.target.textContent&&(console.log("Download button clicked"),window.open(this.props.downloadurl,"_blank")),"addToList"===e.currentTarget.id){const o=this.props;console.log("selectedBook: ",o),console.log("Add to Reading List button clicked");const t=localStorage.getItem("username");console.log("found username: ",t);const n=await fetch(`/db/users/favorites/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({book:o})});console.log("response: ",n);const a=await n.json();console.log("data: ",a),e.target.textContent="Added to Reading List"}})),o(this,"addFavorite",(()=>"false"===this.props.favorite?n(a,{id:"addToList",size:"small",variant:"text",onClick:this.handleClick,children:"Add To Reading List"}):n(a,{id:"removeFromList",className:"removeFromList",size:"small",variant:"text",onClick:this.handleClick,children:"Remove From Reading List"}))),this.setFavorites=this.props.setFavorites}render(){return s(i,{className:"book",sx:{maxHeight:400,minHeight:400,maxWidth:345,boxShadow:8,borderRadius:2,backgroundColor:"#fffcf2"},children:[s(r,{children:[n(l,{className:"infoIcon",sx:{color:"#000000",position:"relative",top:-9,right:-154,height:8},onClick:this.handleClick,children:n(d,{})}),n(c,{className:"book-title",variant:"h5",component:"div",sx:{height:70,overflow:"auto"},children:this.props.title}),n(c,{className:"author",sx:{mb:1.5,height:30,overflow:"auto"},color:"text.secondary",children:this.props.author}),s(c,{className:"year",variant:"body2",color:"text.secondary",sx:{height:20},children:[n("strong",{children:"Year: "}),this.props.year]}),s(c,{className:"language",variant:"body2",color:"text.secondary",sx:{height:20},children:[n("strong",{children:"Language: "}),this.props.language]}),s(c,{className:"extension",variant:"body2",color:"text.secondary",sx:{height:20,marginBottom:2},children:[n("strong",{children:"Extension: "}),this.props.extension]}),s(c,{className:"description",variant:"body2",color:"text.secondary",sx:{overflow:"scroll",height:130,textAlign:"left"},children:[n("strong",{children:"Description: "}),this.props.description]})]}),s(u,{sx:{display:"flex",flexDirection:"row",alignContent:"flex-end",alignItems:"flex-end",justifyContent:"space-between",position:"relative",top:-15},children:[n("div",{children:n(a,{size:"small",variant:"text",onClick:this.handleClick,children:"Download"})}),n("div",{children:this.addFavorite()})]})]})}}function B({books:e},o=[],t){return n("div",{className:"booksContainer",children:function(){if(e)return e.map((e=>n(j,{title:e.title,author:e.author,year:e.year,language:e.language,extension:e.extension,downloadurl:e.downloadurl,google_id:e.google_id,openlib_id:e.openlib_id,description:e.description,favorite:"false",className:"book",sx:{display:"flex",flexDirection:"column",flexWrap:"wrap",justifyContent:"center",alignItems:"center",alignContent:"center",overflow:"auto"}},e.md5)))}()})}function E({books:e},o=[],t){return n("div",{className:"booksContainer",children:function(){if(e)return e.map((e=>n(j,{title:e.title,author:e.author,year:e.year,language:e.language,extension:e.extension,downloadurl:e.downloadurl,google_id:e.google_id,openlib_id:e.openlib_id,description:e.description,favorite:"true",className:"book",sx:{display:"flex",flexDirection:"column",flexWrap:"wrap",justifyContent:"center",alignItems:"center",alignContent:"center",overflow:"auto"}},e.md5)))}()})}function R(e){const[o,a]=t.exports.useState([]),[i,r]=t.exports.useState([]),[d,c]=t.exports.useState(""),[u,I]=t.exports.useState(""),[j,R]=t.exports.useState(""),[_,A]=h.useState(!1),F=()=>A(!1),[D,z]=t.exports.useState("one"),O=async()=>{A(!0)},M=p({status:{error:"#000000"},input:{color:"#000000"}}),P=e=>{"search"===e.target.id&&c(e.target.value),"username"===e.target.id&&I(e.target.value),"password"===e.target.id&&R(e.target.value)};return s(g,{theme:M,children:[n(m,{}),s(f,{children:[s("div",{className:L,children:[s("div",{className:"head-bar",children:[n("p",{id:"title",style:{font:"Montserrat"},children:"BIBL.IO"}),n(b,{id:"tabs-box",sx:{position:"absolute",left:"17em",top:"17px",color:"white"},children:s(v,{className:"tab",value:D,onChange:(e,o)=>{z(o)},textColor:"white",indicatorColor:"white",children:[n(x,{className:"child-tab",value:"one",label:"Home",sx:{backgroundColor:"#eb5e28"}}),n(x,{className:"child-tab",value:"two",label:"About"})]})}),n("div",{id:"login-container",className:"login-container",children:s("div",{id:"login-form",className:"login-form",children:[n(y,{className:"login-input",required:!0,id:"username",label:"Username",size:"small",variant:"standard",value:u,onChange:P,sx:{color:"white",backgroundColor:"1c1d23",borderRadius:"4px",marginRight:"8px",margin:"normal",textTransform:"uppercase"},style:{textTransform:"uppercase"}}),n(y,{className:"login-input",required:!0,id:"password",label:"Password",size:"small",variant:"standard",value:j,onChange:P,sx:{backgroundColor:"#1c1d23",borderRadius:"4px",marginRight:"8px",textTransform:"uppercase"},style:{textTransform:"uppercase"}}),n("button",{className:"loginButton",id:"login-button",onClick:async function(){console.log("handleLogin() called");const e=await fetch(`/db/login/${u}/${j}`,{method:"GET"}),o=await e.json();if(console.log(o.message),"User verified"!==o.message&&(console.log("incorrect user and/or password"),alert("Incorrect username and/or password")),"User verified"===o.message){document.getElementById("login-form").style.display="none";const e=document.createElement("div");e.innerHTML="Signed in as "+u,e.setAttribute("style","color: white"),e.setAttribute("id","signed-in"),document.getElementById("login-container").appendChild(e),window.localStorage.setItem("username",u),alert("Login successful"),console.log("User found")}},style:{fontSize:"12px",width:"80px"},children:"LOGIN"}),n("button",{className:"loginButton",id:"signup-button",onClick:async function(){console.log("handleSignup() called");const e=await fetch("db/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:u,password:j})});window.localStorage.setItem("username",u),document.getElementById("login-form").style.display="none";const o=document.createElement("div");o.innerHTML="Signed in as "+u,o.setAttribute("style","color: white"),o.setAttribute("id","signed-in"),document.getElementById("login-container").appendChild(o),alert("Signup successful");const t=await e.json();console.log("response from handleSignup(): ",t.message)},style:{fontSize:"12px",width:"80px"},children:"REGISTER"})]})})]}),s("div",{className:"ribbon-container",children:[n("div",{className:"search-field-container",children:n(y,{className:"search-field",id:"search",label:"Search",variant:"standard",onChange:P,value:d,sx:{width:"100%",textTransform:"uppercase"}})}),n("div",{className:"searchButtonContainer",children:n(l,{sx:{transform:"scale(150%)",color:"white",position:"relative",top:"1.55em",left:"-3.6em"},"aria-label":"search",onClick:async function(){console.log("current search input is: ",{search:d});const e=await fetch(`/api/libgen/${d}`,{method:"GET"}),o=await e.json();a(o.message)},children:n(w,{})})})]}),n(C,{open:_,onClose:F,"aria-labelledby":"modal-favorites","aria-describedby":"modal-favorited-books",children:s(b,{children:[n("button",{id:"modal-close",style:{position:"absolute",right:"0px",top:"0px",fontSize:"20px",backgroundColor:"transparent",color:"white",border:"none"},onClick:F,children:"X"}),n(E,{books:i,favorites:i,setFavorites:r})]})}),n("div",{className:"booksDisplayContainer",children:n(B,{books:o,favorites:i})}),n("div",{className:"favoritesButtonContainer",children:s(k,{variant:"extended",onClick:async e=>{if(window.sessionStorage.getItem("username")){console.log("updating favorites");const e=await fetch(`/db/users/favorites/${u}`,{method:"GET",headers:{"Content-Type":"application/json"}});console.log("retrievedFavorites: ",e);const o=await e.json();console.log("data: ",o),r(o.message),O()}else alert("Please log in to view your favorites")},sx:{backgroundColor:"#eb5e28",position:"fixed",bottom:"20px",right:"20px"},children:[n(N,{sx:{mr:1}}),"Favorites"]})}),n(S,{children:n(T,{path:"/"})})]}),s("div",{className:"footer",children:[n("div",{id:"separator"}),n("div",{id:"separator"})]})]})]})}I.render(n(h.StrictMode,{children:n(R,{className:"app"})}),document.querySelector("#root"));
